# Online video contact sheet

Idea is to build a thumbnail grid preview of online videos and/or videos on disk.
This is known as "Video contact sheet", as I found out.

**Similar existing implementations**:

- https://github.com/mutschler/mt
- https://github.com/amietn/vcsi

But these only work for videos on disk.
I wanted to leverage the ability of `mpv` / `yt-dlp` to stream / seek to multiple positions in the video, take screenshots, and compile into a video contact sheet.

I envisioned:

- takes a url or existing video on disk
- by default, takes the xth percentile timestamp snapshot. suppose n=16 images, then gap between timestamps should be 100/n, starting from (100/2n)th percentile time.
- option to ignore the first x minutes before calculating the percentiles
- ability to specify exact timestamps (and organize into the neatest, “squarest” grid)
- fix the size of each subimage to be a certain dpi (keep original resolution of source video), let the output be as big as necessary.
- attach the timestamp (formatted!) as a watermark on each screengrab, lower right corner
- add thin black borders between each image in the grid so it looks nice
- outputs a high-def image
- add an image metadata specifying that it is generated by my tool + git SHA + generated timestamp, and the video source url (where applicable).

## Problems I encountered

- mpv has a screenshot functionality, but it seemed to only be invokable via the OSD (pseudo-GUI) or within a lua script.
  The former is out of the question, the latter I tried but couldn't extract out the timestamp into the filename.
- Without the ability to extract out timestamps automatically from the "absolute-percent" (e.g. what 50% corresponded to), I can't embed the text annotation in the image in the next step.

## More references

- https://github.com/po5/thumbfast/blob/master/thumbfast.lua
  - mpv script dealing with thumbnails as well, but it's more for the OSD: preview video when scrolling through the OSD
